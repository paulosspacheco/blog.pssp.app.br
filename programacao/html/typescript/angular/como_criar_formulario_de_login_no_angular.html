<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Como criar formul&aacute;rio de login no angular &lt;a href&equals;&quot;modelo03&period;html&quot; target&equals;&quot;&lowbar;blank&quot; title&equals;&quot;Pressione aqui para expandir este documento em nova aba&period;&quot; &gt;  &#x279a; &lt;&sol;a&gt;</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <!-- CSS markdown  -->
        <link type="text/css" href="/css/defaultthemeMarkdown.css"  rel="stylesheet"/>
            
        <!-- CSS da p√°gina /index.html -->
        <link type="text/css" href="/css/defaulttheme.css" rel="stylesheet"/>


    </head>
    <body class="vscode-body vscode-dark">
        <p><span id="topo"><span></p>
<h1 id="como-criar-formul√°rio-de-login-no-angular----">Como criar formul√°rio de login no angular <a href="modelo03.html" target="_blank" title="Pressione aqui para expandir este documento em nova aba." >  ‚ûö </a></h1>
<h2 id="1-index"><strong>1. INDEX</strong></h2>
<hr>
<ol>
<li>
<p><a href="#id_resumo">Resumo do conte√∫do</a></p>
</li>
<li>
<p><strong>Introdu√ß√£o</strong></p>
<ol>
<li><a href="#id_objetivo">Objetivo.</a></li>
<li><a href="#id_pre_requisitos">Pre-requisitos.</a></li>
<li><a href="#id_beneficios">Benef√≠cios.</a></li>
</ol>
</li>
<li>
<p><a href="#id_Conteudo"><strong>Como criar formul√°rio de login  no Angular 2.</strong></a></p>
<ol>
<li><a href="#id_Passo01">Passo 01</a> - Criar a classe <strong>LoginComponent</strong>...</li>
<li><a href="#id_passo02">Passo 02</a> - Habilitar a diretiva <strong>[(ngModel)]</strong> em <strong>src/app/login.component.html</strong>...</li>
<li><a href="#id_passo03">Passo 03</a> - Criar classe <strong>Usuario</strong> em <strong>src/app/page/login/usuario.ts</strong>...</li>
<li><a href="#id_passo04">Passo 04</a> - Criar servi√ßo <strong>AuthService</strong> em <strong>src/app/page/login/auth.service.ts</strong>...</li>
<li><a href="#id_passo05">Passo 05</a> - Editar o template <strong>src/app/login.component.html</strong> para ler nome do <strong>usu√°rio</strong> e <strong>senha</strong>...</li>
<li><a href="#id_passo06">Passo 06</a> - Registrar o componente <strong>LoginComponent</strong> na matriz <strong>const routes: Routes = []</strong> do arquivo <strong>src/app/app-routing.module.ts</strong>...</li>
<li><a href="#id_passo07">Passo 07</a> - Criar menubar em :  <strong>src/app/app.component.html</strong>...</li>
<li><a href="#id_passo08">Passo 08</a> - Criar a classe <strong>HomeComponent</strong> em  <strong>pages/home/home.component.ts</strong> para demonstrar o passo 09.</li>
<li><a href="#id_passo09">Passo 09</a> - Ocultar a barra de menu quando o usu√°rio n√£o tiver autenticado</li>
<li><a href="#id_passo10">Passo 10</a> - Usando guada de rotas para bloquear p√°gina html do usu√°rio n√£o autenticado</li>
</ol>
</li>
<li>
<p><a href="#id_referencias"><strong>Refer√™ncias globais.</strong></a></p>
</li>
<li>
<p><a href="#id_historico"><strong>Hist√≥rico.</strong></a></p>
</li>
</ol>
<h2 id="2-conte√∫do"><strong>2. CONTE√öDO</strong></h2>
<hr>
<ol>
<li>
<p><span id="id_resumo"><span><strong>Resumo do conte√∫do:</strong></p>
<ol>
<li>
<p>Este documento encina o passo a passo de como implementar com o framework angular 12+ a autentica√ß√£o do usu√°rio.</p>
</li>
<li>
<p>A autentica√ß√£o cria dois servi√ßos sendo o <strong>AuthService</strong> para autentica√ß√£o e o  <strong>AuthGuardService</strong> para guarda de rotas.</p>
</li>
<li>
<p>Os <strong>passos 01 a 06</strong> √© criado o <strong>formul√°rio de login</strong> e o servi√ßo de autentica√ß√£o <strong>AuthService</strong>.</p>
<ol>
<li>Ao clicar no bot√£o <strong>enviar do formul√°rio</strong> de login, o sistema checa se o campo <strong>usu√°rio.nome</strong> √© igual a <strong><a href="mailto:paulosspacheco@yahoo.com.br">paulosspacheco@yahoo.com.br</a></strong> e o campo <strong>usu√°rio.senha</strong> √© igua a <strong>12345</strong>, em seguida imprime um formul√°rio de mensagem informando se usu√°rio est√° conectado ou n√£o.</li>
</ol>
</li>
<li>
<p>Os <strong>passos 07 a 09</strong> √© implementado a <strong>p√°gina home</strong> com o propos√≠to de implementar o <strong>menu de op√ß√µes</strong> da aplica√ß√£o.</p>
<ol>
<li>Quando o usu√°rio est√° conectado o menu √© mostrado e quando o usu√°rio est√° desconectado o menu √© omitido.</li>
</ol>
</li>
<li>
<p>O <strong>passo 10</strong> √© implementado a trava nas rotas onde a p√°gina s√≥ √© visualizada se o usu√°rio estiver conectado, exceto a p√°gina de login.</p>
</li>
</ol>
</li>
<li>
<p><strong>Introdu√ß√£o</strong></p>
<ol>
<li>
<p><span id="id_objetivo"><span><strong>Objetivo:</strong></p>
<ol>
<li>
<p>Esse exemplo descreve todos os passos para criar um formul√°rio de login com autentica√ß√£o usando um servi√ßo do angular .</p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id="id_pre_requisitos"></span><strong>Pre-requisitos:</strong></p>
<ol>
<li>
<p>Nodejs instalado.</p>
</li>
<li>
<p>Framework Angular 2 ou superior instalado. <a href="./o_que_e_angular.html#id_instalar">Veja como instalar Angular 2...</a></p>
</li>
<li>
<p>Projeto deve ter sido criado com o comando <strong>ng new nome-do-projeto</strong></p>
</li>
<li>
<p>Dom√≠nio da linguagem typescript</p>
</li>
<li>
<p>Dom√≠nio da linguagem html</p>
</li>
<li>
<p>Dom√≠nio da linguagem css</p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id="id_beneficios"></span><strong>Benef√≠cios:</strong></p>
<ol>
<li>
<p>Conhecimento de tudo que precisa saber para autenticar usu√°rios.</p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p><span id=id_Conteudo></span><strong>Como criar formul√°rio de login  no Angular 2</strong></p>
<ol>
<li>
<p><span id=id_Passo01></span> <strong>Passo 01</strong></p>
<ol>
<li>
<p>Criar a classe <strong>LoginComponent</strong> em  <strong>pages/login/login.component.ts</strong>.</p>
<ol>
<li>
<p>C√≥digo shellscript</p>
<pre><code class="hljs language-sh">   <span class="hljs-comment"># Entrar na raiz do projeto e executar o comando:</span>
   ng generate component pages/login  
</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/cli/generate#component">Criando component angular 2 com a cli</a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo02></span><strong>Passo 02</strong></p>
<ol>
<li>
<p>Para usar a diretiva <strong>[(ngModel)]</strong> em <strong>src/app/login.component.html</strong> √© necess√°rio importar em <strong>src/app/app.module.ts</strong> os seguintes componentes:</p>
<ol>
<li>
<p><a href="https://angular.io/api/forms/FormsModule#formsmodule">FormsModule</a>, exporta os provedores e diretivas necess√°rios para formul√°rios orientados a modelos, tornando-os dispon√≠veis para importa√ß√£o por <strong>NgModules</strong> que importam este m√≥dulo.</p>
</li>
<li>
<p><a href="https://angular.io/api/forms/ReactiveFormsModule#reactiveformsmodule">ReactiveFormsModule</a>. exporta a infraestrutura e diretivas necess√°rias para os formul√°rios reativos, disponibilizando-os para importa√ß√£o pelos <strong>NgModules</strong> que importam este m√≥dulo.</p>
<ol>
<li>
<p>C√≥digo typescript</p>
<pre><code class="hljs language-ts">  <span class="hljs-comment">//file : **src/app/app.module.ts**</span>

  <span class="hljs-comment">/**
   * Importa FormsModule e  ReactiveFormsModule
   */</span>
  <span class="hljs-keyword">import</span> { FormsModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>; 
  <span class="hljs-keyword">import</span> { ReactiveFormsModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;

  <span class="hljs-meta">@NgModule</span>(
      {
          declarations: [],
          imports: [FormsModule,
                    ReactiveFormsModule
          ], 
          
      }
  )               

</code></pre>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/api/forms/FormsModule#formsmodule">FormsModule</a></li>
<li><a href="https://angular.io/api/forms/ReactiveFormsModule#reactiveformsmodule">ReactiveFormsModule</a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo03></span><strong>Passo 03</strong></p>
<ol>
<li>
<p>Criar classe <strong>Usuario</strong> em <strong>src/app/page/login/usuario.ts</strong>:.</p>
<ol>
<li>C√≥digo shellscript e typescript.
<ol>
<li>
<p>Criar class usuario no prompt de comandos:</p>
<pre><code class="hljs language-sh">   ng generate class pages/login/usuario
</code></pre>
</li>
<li>
<p>Adicionar os atributos <strong>nome</strong>, <strong>senha</strong> e <strong>autenticado</strong> na classe <strong>Usuario</strong> em <strong>src/app/pages/login/usuario.ts</strong></p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file: **src/app/pages/login/usuario.ts**</span>

   <span class="hljs-comment">/**
   * Class Usuario
   * Objetivo: Guardar na mem√≥ria o usuario conectado
   * 
   */</span>
   <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Usuario {
     nome:<span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;
     senha:<span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;  
     <span class="hljs-comment">/**
     * o atributo autenticado √© usado para sinalizar se o usu√°rio est√° conectado ou n√£o.
     * False usu√°rio desconectado, 
     * true usu√°rio conectado
     */</span>
     autenticado : <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>; 
   }
</code></pre>
</li>
<li>
<p>Criar atributo <strong>usuario</strong>, injetar a classe <strong>AuthService</strong> e criar m√©todo <strong>fazerLogin()</strong> na classe <strong>LoginComponent</strong> do arquivo <strong>src/app/login.component.ts</strong></p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file: *src/app/login.component.ts**</span>
   <span class="hljs-comment">/**
    * Importa arquivo de usu√°rio
   */</span>
   <span class="hljs-keyword">import</span> { Usuario } <span class="hljs-keyword">from</span> <span class="hljs-string">'./usuario'</span>;

   <span class="hljs-comment">/**
    * Importa arquivo auth.service a ser criado no passo 04
   */</span>                     
   <span class="hljs-keyword">import</span> { AuthService } <span class="hljs-keyword">from</span> <span class="hljs-string">'./auth.service'</span>;

   <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> LoginComponent <span class="hljs-keyword">implements</span> OnInit {
      <span class="hljs-comment">/**
         * Declarar o atributo usu√°rio 
         */</span>
      <span class="hljs-keyword">public</span> usuario:Usuario = <span class="hljs-keyword">new</span> Usuario();
      <span class="hljs-comment">/**
         * Injetar AuthService na classe LoginComponent
         * @param authService 
         */</span>
      <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> authService : AuthService</span>) {   }
                           
      <span class="hljs-comment">/**
         * M√©todo fazerLogin() usado para autenticar o usu√°rio usando o servi√ßo injetado AuthService
         */</span>
      fazerLogin(){     
         <span class="hljs-comment">/**
            * Autentica usu√°rio
            */</span>
         <span class="hljs-keyword">this</span>.authService.fazerLogin(<span class="hljs-keyword">this</span>.usuario);

         <span class="hljs-comment">/**
            * Imprime no console nome, senha e flag se autenticado . 
            * ATEN√á√ÉO: As 3 linhas abaixo n√£o deve existir em ambiente de produ√ß√£o.
            */</span>
         <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Usuario: '</span>+<span class="hljs-keyword">this</span>.usuario.nome);
         <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Senha:'</span>+<span class="hljs-keyword">this</span>.usuario.senha);
         <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Autenticado:'</span>+<span class="hljs-keyword">this</span>.authService.autenticado);     

         <span class="hljs-comment">/**
            * Imprime mensagem se usu√°rio foi conectado ou n√£o.
            */</span>
         alert(<span class="hljs-keyword">this</span>.authService.autenticado ? <span class="hljs-string">'Usu√°rio autenticado'</span> : <span class="hljs-string">'Usu√°rio n√£o autenticado'</span>);     
         
      }

      ngOnInit(): <span class="hljs-built_in">void</span> {
      }

   }
</code></pre>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/cli/generate#class-command">ng generate class <name> [options]</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/classes.html">Class typescript</a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo04></span><strong>Passo 04</strong></p>
<ol>
<li>
<p>Criar servi√ßo <strong>AuthService</strong> em <strong>src/app/page/login/auth.service.ts</strong>:.</p>
<ol>
<li><strong>C√≥digo shellscript e typescript</strong>.
<ol>
<li>
<p>Criar servi√ßo <strong>AuthService</strong> no prompt de comandos:</p>
<pre><code class="hljs language-sh">   ng generate service pages/login/auth
</code></pre>
</li>
<li>
<p>Registrar o servi√ßo <strong>AuthService</strong> em <strong>@NgModule( providers: [AuthService])</strong> no arquivo <strong>src/app/app.module.ts</strong>:</p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file: **src/app/app.module.ts**</span>

   <span class="hljs-comment">/**
    * Importa servi√ßo auth.service
    */</span>                    
   <span class="hljs-keyword">import</span> { AuthService } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/login/auth.service'</span>;

   <span class="hljs-meta">@NgModule</span>({
         declarations: [],
         imports: [],    
         <span class="hljs-comment">/**
          * Registra servi√ßo AuthService em providers
          */</span>                    
         providers: [AuthService], 
     }

   )                
</code></pre>
</li>
<li>
<p>Criar a propriedade <strong>autenticado()</strong> e <strong>Injetar em constructor()</strong> a classe <strong>Router</strong></p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file : **src/app/page/login/auth.service.ts**</span>

   <span class="hljs-comment">/**
    * Importa as classes Router, RouterModule 
    */</span>
   <span class="hljs-keyword">import</span> { Router, RouterModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;

   <span class="hljs-meta">@Injectable</span>({  providedIn: <span class="hljs-string">'root'</span>  })
   <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AuthService {

      <span class="hljs-comment">/**
         * A propriedade autenticado √© usado para sinalizar se o usu√°rio est√° conectado ou n√£o.
         * False usu√°rio desconectado, 
         * true usu√°rio conectado
         */</span>   
      <span class="hljs-keyword">private</span> _autenticado : <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;  
      <span class="hljs-keyword">get</span>  autenticado() : <span class="hljs-built_in">boolean</span> {
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._autenticado;
      };

      <span class="hljs-comment">/**
         * Injeta o par√¢metro router na classe.
         * @param router 
         */</span>
      <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> router : Router</span>) { }                        
   }

</code></pre>
</li>
<li>
<p>Cria m√©todo <strong>fazerLogin()</strong> na classe <strong>AuthService</strong> do arquivo <strong>src/app/page/login/auth.service.ts</strong></p>
<pre><code class="hljs language-ts"> <span class="hljs-comment">//file : **src/app/page/login/auth.service.ts**</span>

 <span class="hljs-comment">/**
  * Importar a classe usu√°rio
  */</span>
 <span class="hljs-keyword">import</span> { Usuario } <span class="hljs-keyword">from</span> <span class="hljs-string">'./usuario'</span>;

 <span class="hljs-meta">@Injectable</span>({  providedIn: <span class="hljs-string">'root'</span>  })
 <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AuthService {

   <span class="hljs-comment">/**
    * M√©todo para enviar evento para a classe AppComponent
    * Nota: A Classe EventEmitter pertence ao pacote '@angular/core'.
    *       ??? O Vscode encontra essa classe no pacote stream
    */</span>     
      <span class="hljs-keyword">public</span> mostrarMenuEmitter : EventEmitter&lt;<span class="hljs-built_in">boolean</span>&gt;; 

     <span class="hljs-comment">/**
     * M√©todo fazerLogin usado par autenticar usu√°rio.
     * @param usuario:Usuario 
     */</span>
     fazerLogin(usuario:Usuario)
     {
         <span class="hljs-comment">/**
         * O nome 'paulosspacheco@yahoo.com.br'  a senha '12345' deve ser substitu√≠do 
         * por um servi√ßo de autentica√ß√£o no servidor.
         */</span>
         <span class="hljs-keyword">if</span> ((usuario.nome===<span class="hljs-string">'paulosspacheco@yahoo.com.br'</span>) &amp;&amp; 
             (usuario.senha ===<span class="hljs-string">'12345'</span> )) 
         { 
            <span class="hljs-keyword">this</span>.autenticado = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">this</span>.router.navigate([<span class="hljs-string">'/'</span>]);
         } <span class="hljs-keyword">else</span> 
         {
            <span class="hljs-keyword">this</span>.autenticado = <span class="hljs-literal">false</span>;
         }
         <span class="hljs-comment">/**
          * Atualizar o flag usuario.autenticado
          */</span>
         usuario.autenticado = <span class="hljs-keyword">this</span>._autenticado;
     }
 }

</code></pre>
</li>
<li>
<p>.</p>
</li>
</ol>
</li>
<li><strong>Refer√™ncias:</strong></li>
<li><a href="https://angular.io/cli/generate#service-command">ng generate service <name> [options]</a></li>
<li><a href="https://angular.io/guide/dependency-injection#dependency-injection-in-angular">Inje√ß√£o de depend√™ncia em Angular</a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo05></span><strong>Passo 05</strong></p>
<ol>
<li>
<p>Editar o template <strong>src/app/login.component.html</strong> para ler nome do <strong>usu√°rio</strong> e <strong>senha</strong>:</p>
<ol>
<li>
<p>P√°gina html sem intera√ß√£o com a classe <strong>src/app/login.component.ts</strong></p>
<pre><code class="hljs language-html">   <span class="hljs-comment">&lt;!-- file: **src/app/login.component.html** --&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>login works!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-field"</span> <span class="hljs-attr">col-s-12</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"usuario"</span>&gt;</span>Usu√°rio<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>     
         <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"usuario"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"validate"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-field"</span> <span class="hljs-attr">col-s-12</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"senha"</span>&gt;</span>Senha<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>     
         <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"senha"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"validate"</span>&gt;</span>        
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>     

      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"action"</span> (<span class="hljs-attr">onclick</span>)=<span class="hljs-string">"alert('Ok login');"</span>&gt;</span> Login<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</li>
<li>
<p>P√°gina html com intera√ß√£o com a classe <strong>src/app/login.component.ts</strong></p>
<pre><code class="hljs language-html">   <span class="hljs-comment">&lt;!-- file: **src/app/login.component.html** --&gt;</span>
   
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>login works!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-field"</span> <span class="hljs-attr">col-s-12</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"usuario"</span>&gt;</span>Usu√°rio<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>     
         <span class="hljs-tag">&lt;<span class="hljs-name">input</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"usuario.nome"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"usuario"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"validate"</span>&gt;</span>
         
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-field"</span> <span class="hljs-attr">col-s-12</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"senha"</span>&gt;</span>Senha<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>     
         <span class="hljs-tag">&lt;<span class="hljs-name">input</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"usuario.senha"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"senha"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"validate"</span>&gt;</span>        
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>     

      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"action"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"fazerLogin()"</span>&gt;</span> Login<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/api/forms/NgModel#using-ngmodel-on-a-standalone-control">Usando ngModel em um controle aut√¥nomo</a></li>
<li><a href="https://angular.io/api/forms/FormsModule#formsmodule">FormsModule</a></li>
<li><a href="https://angular.io/api/forms/ReactiveFormsModule#reactiveformsmodule">ReactiveFormsModule</a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo06></span><strong>Passo 06</strong></p>
<ol>
<li>
<p>Para que o template <strong>src/app/login.componente.html</strong> seja visualizado √© necess√°rios registrar o componente <strong>LoginComponent</strong> na matriz <strong>const routes: Routes = []</strong> do arquivo <strong>src/app/app-routing.module.ts</strong>.</p>
<ol>
<li>
<p>C√≥digo typescript</p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file:**src/app/app-routing.module.ts**</span>
   <span class="hljs-comment">/**
    * Importar classe login.component                   
    */</span>
   <span class="hljs-keyword">import</span> { LoginComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/login/login.component'</span>;

   <span class="hljs-comment">/**
   * Criar rotas para que seja reconhecida pelos templates.html
   */</span>
   <span class="hljs-keyword">const</span> routes: Routes = [
      {path:<span class="hljs-string">'login'</span>, component:LoginComponent},
   ];
   
</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/guide/router">Importe <strong>RouterModule</strong> e <strong>Routes</strong> em seu m√≥dulo de roteamento.</a></li>
<li><a href="https://angular.io/api/router/Routes#routes">Matriz de objetos <strong>Routes</strong></a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo07></span><strong>Passo 07</strong></p>
<ol>
<li>
<p>Criar menubar em :  <strong>src/app/app.component.html</strong></p>
<ol>
<li>
<p>Apagar todo o c√≥digo criado automaticamente do arquivo <strong>src/app/app.component.html</strong></p>
</li>
<li>
<p>Adicionar o c√≥digo abaixo no arquivo <strong>src/app/app.component.html</strong></p>
<pre><code class="hljs language-html">   <span class="hljs-comment">&lt;!--file: **src/app/app.component.html** --&gt;</span>

   <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
   <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">font-family</span>: Arial, Helvetica, sans-serif;
   }
   
   <span class="hljs-selector-class">.topnav</span> {
      <span class="hljs-attribute">overflow</span>: hidden;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333</span>;
   }
   
   <span class="hljs-selector-class">.topnav</span> <span class="hljs-selector-tag">a</span> {
      <span class="hljs-attribute">float</span>: left;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#f2f2f2</span>;
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">14px</span> <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">text-decoration</span>: none;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">17px</span>;
   }
   
   <span class="hljs-selector-class">.topnav</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ddd</span>;
      <span class="hljs-attribute">color</span>: black;
   }
   
   <span class="hljs-selector-class">.topnav</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.active</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#04AA6D</span>;
      <span class="hljs-attribute">color</span>: white;
   }
   </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
   
   <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Angular Router App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Aqui deve ser inserido o menu com todas as op√ß√µes do projeto<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   <span class="hljs-comment">&lt;!-- This nav gives you links to click, which tells the router which route to use (defined in the routes constant in  AppRoutingModule) --&gt;</span>
      <span class="hljs-comment">&lt;!-- Menu de op√ß√µes --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topnav"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myTopnav"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"selected"</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
   <span class="hljs-comment">&lt;!-- The routed views render in the &lt;router-outlet&gt;--&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">router-outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-outlet</span>&gt;</span>

</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/api/router/RouterOutlet#description">Descri√ß√£o da diretiva <strong>router-outlet</strong></a></li>
<li><a href="https://angular.io/api/router/RouterOutlet#routeroutlet">Diretiva <strong>router-outlet</strong></a></li>
<li><a href="https://angular.io/api/router/RouterLink">Diretiva <strong>RouterLink</strong></a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo08></span><strong>Passo 08</strong></p>
<ol>
<li>
<p>Criar a classe <strong>HomeComponent</strong> em  <strong>pages/home/home.component.ts</strong> para demonstrar o passo 09.</p>
<ol>
<li>
<p>C√≥digo shellscript</p>
<pre><code class="hljs language-sh">   <span class="hljs-comment"># Entrar na raiz do projeto e executar o comando:</span>
   ng generate component pages/home  
</code></pre>
</li>
</ol>
</li>
<li>
<p>Para que o template <strong>src/app/home.componente.html</strong> seja visualizado √© necess√°rios registrar o componente <strong>HomeComponent</strong> na matriz <strong>const routes: Routes = []</strong> do arquivo <strong>src/app/app-routing.module.ts</strong>.</p>
<ol>
<li>
<p>C√≥digo typescript</p>
<pre><code class="hljs language-ts">   file:**src/app/app-routing.<span class="hljs-keyword">module</span>.ts** 
   /**
    * Importar componente na classe
    */
   import { HomeComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/home/home.component'</span>;

   <span class="hljs-comment">/**
   * Criar rotas para que seja reconhecida pelos templates.html
   */</span>
   <span class="hljs-keyword">const</span> routes: Routes = [
      {path:<span class="hljs-string">'home'</span>, component:HomeComponent},
   ];
   
</code></pre>
</li>
</ol>
</li>
<li>
<p>Adicionar no menubar em <strong>src/app/app.component.html</strong> a classe <strong>HomeComponent</strong>:</p>
<pre><code class="hljs language-html">   <span class="hljs-comment">&lt;!-- Menu de op√ß√µes --&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topnav"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myTopnav"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/home"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"selected"</span>&gt;</span>home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"selected"</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>             
</code></pre>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/cli/generate#component">Criando component angular 2 com a cli</a></li>
<li><a href="https://angular.io/guide/router">Importe <strong>RouterModule</strong> e <strong>Routes</strong> em seu m√≥dulo de roteamento.</a></li>
<li><a href="https://angular.io/api/router/Routes#routes">Matriz de objetos <strong>Routes</strong></a></li>
<li><a href="https://angular.io/api/router/RouterLink">Diretiva <strong>RouterLink</strong></a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo09></span><strong>Passo 09</strong></p>
<ol>
<li>
<p>Ocultar a barra de menu quando o usu√°rio n√£o tiver autenticado.</p>
<ol>
<li>
<p>Na classe <strong>AuthService</strong> do arquivo <strong>src/app/page/login/auth.service.ts</strong>:</p>
<ol>
<li>
<p>Criar m√©todo <strong>mostrarMenuEmitter</strong> do tipo <a href="https://angular.io/api/core/EventEmitter"><strong>EventEmitter<boolean></strong></a>.</p>
</li>
<li>
<p>No m√©todo <strong>fazerLogin()</strong> executar os m√©todos:</p>
<ol>
<li><a href="https://angular.io/api/core/EventEmitter#methods"><strong>mostrarMenuEmitter.emit(true)</strong></a> se usu√°rio estiver autenticado;</li>
<li><a href="https://angular.io/api/core/EventEmitter#methods"><strong>mostrarMenuEmitter.emit(false)</strong></a> se usu√°rio n√£o tiver autenticado.</li>
</ol>
</li>
<li>
<p>C√≥digo typescript</p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file:**src/app/page/login/auth.service.ts**</span>
   <span class="hljs-comment">/**
    * Importa classes: EventEmitter 
    */</span>
   <span class="hljs-keyword">import</span> {EventEmitter } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

   <span class="hljs-meta">@Injectable</span>({
   providedIn: <span class="hljs-string">'root'</span>
   })
   <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AuthService {

   <span class="hljs-comment">/**
   * M√©todo para enviar evento para a classe AppComponent
   * Nota: A Classe EventEmitter pertence ao pacote '@angular/core'.
   *       ??? O Vscode encontra essa classe no pacote stream
   */</span>     
   <span class="hljs-keyword">public</span> mostrarMenuEmitter : EventEmitter&lt;<span class="hljs-built_in">boolean</span>&gt;; 

   <span class="hljs-comment">/**
      * Injeta o par√¢metro router na classe.
      * @param router 
      */</span>
   <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> router : Router</span>) { 
      <span class="hljs-comment">/**
       * Cria objeto mostrarMenuEmitter
       */</span>
      <span class="hljs-keyword">this</span>.mostrarMenuEmitter = <span class="hljs-keyword">new</span> EventEmitter&lt;<span class="hljs-built_in">boolean</span>&gt;(); 
   }
   
   <span class="hljs-comment">/**
      * M√©todo fazerLogin usado par autenticar usu√°rio.
      * @param usuario:Usuario 
      */</span>
   fazerLogin(usuario:Usuario)
   {
         <span class="hljs-comment">/**
         * O nome 'paulosspacheco@yahoo.com.br'  a senha '12345' deve ser substitu√≠do 
         * por um servi√ßo de autentica√ß√£o no servidor.
         */</span>
         <span class="hljs-keyword">if</span> ((usuario.nome===<span class="hljs-string">'paulosspacheco@yahoo.com.br'</span>) &amp;&amp; 
            (usuario.senha ===<span class="hljs-string">'12345'</span> )) 
         {                                
           <span class="hljs-keyword">this</span>.mostrarMenuEmitter.emit(<span class="hljs-literal">true</span>);
               <span class="hljs-comment">//mostra menu</span>
           <span class="hljs-keyword">this</span>.router.navigate([<span class="hljs-string">'/'</span>]);
         } <span class="hljs-keyword">else</span> 
         {
           <span class="hljs-comment">//esconde menu</span>
           <span class="hljs-keyword">this</span>.mostrarMenuEmitter.emit(<span class="hljs-literal">false</span>);
         }
   }
   }


</code></pre>
</li>
</ol>
</li>
<li>
<p>Na classe <strong>AppComponent</strong> do arquivo <strong>src/app/app.component.ts</strong>:</p>
<ol>
<li>Criar atributo  <strong>mostrarMenu:boolean</strong> e inicializar com false;</li>
<li>Criar <strong>constructor</strong> para <strong>injeta</strong>r a classe <strong>AuthService</strong> na classe AppComponent;</li>
<li>Implementar a interface <strong><a href="https://angular.io/api/core/OnInit">OnInit()</a></strong> na classe <strong>AppComponent</strong> para que o atributo <strong>mostrarMenu</strong> seja reconhecido pelo template <strong>src/app/app.component.html</strong>.
<ol>
<li>
<p>O m√©todo <strong>ngOnInit()</strong> override √© usado para registrar o atributo <strong>mostrarMenu</strong> na classe <a href="https://angular.io/api/core/EventEmitter#subscribe">this.authService.mostrarMenuEmitter</a>.</p>
</li>
<li>
<p>C√≥digo typescript da classe <strong>AppComponent</strong>:</p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file: **src/app/app.component.ts**</span>
   
   <span class="hljs-keyword">import</span> { AuthService } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/login/auth.service'</span>;

   <span class="hljs-meta">@Component</span>({
      selector: <span class="hljs-string">'app-root'</span>,
      templateUrl: <span class="hljs-string">'./app.component.html'</span>,
      styleUrls: [<span class="hljs-string">'./app.component.css'</span>]
   })

   
   <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AppComponent {  
      title:<span class="hljs-built_in">string</span> = <span class="hljs-string">'login'</span>;
      <span class="hljs-comment">//Atributo usado pelo pela diretiva *ngIf do template './app.component.html'</span>
      mostrarMenu:<span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;

      <span class="hljs-comment">// Injetar o servi√ßo AuthService na classe AppComponent.</span>
      <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> authService:AuthService</span>){}

      <span class="hljs-comment">//M√©todo override usado para implementar a interface OnInit().</span>
      ngOnInit(){
         <span class="hljs-keyword">this</span>.authService.mostrarMenuEmitter.subscribe(
            <span class="hljs-comment">//Registar o atributo this.mostrarMenu para que o template app.component.html o reconhe√ßa.</span>
            register =&gt; <span class="hljs-keyword">this</span>.mostrarMenu = register
         )
      }
   }                     
</code></pre>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Na barra de menu <strong>&lt;nav&gt;</strong> do template <strong>src/app/app.component.html</strong> implementar o c√≥digo <strong>&lt;nav *ngIf = &quot;mostrarMenu&quot;&gt;</strong></p>
<ol>
<li>
<p>C√≥digo html do template <strong>src/app/app.component.html</strong></p>
<pre><code class="hljs language-html">   <span class="hljs-comment">&lt;!--file: src/app/app.component.html  --&gt;</span>

   <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> *<span class="hljs-attr">ngIf</span> = <span class="hljs-string">"mostrarMenu"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"topnav"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myTopnav"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/home"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"selected"</span>&gt;</span>home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"selected"</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
   <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>

</code></pre>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/api/core/OnInit">OnInit()</a></li>
<li><a href="https://angular.io/api/core/EventEmitter#subscribe">M√©todo EventEmitter.subscribe</a>.</li>
<li><a href="https://angular.io/api/core/EventEmitter#methods">mostrarMenuEmitter.emit(true)</a></li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_passo10></span><strong>Passo 10 - Usando guada de rotas para bloquear p√°gina html do usu√°rio n√£o autenticado</strong></p>
<ol>
<li>
<p>Criar servi√ßo <strong>AuthGuardService</strong>:</p>
<ol>
<li>
<p>C√≥digo shellscript</p>
<pre><code class="hljs language-sh">   ng generate service guards/auth-guard
</code></pre>
</li>
<li>
<p>C√≥digo do servi√ßo criado pelo comando acima:</p>
<pre><code class="hljs language-ts">   <span class="hljs-comment">//file : src/app/guards/auth-guard.service.ts</span>

   <span class="hljs-keyword">import</span> { Injectable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

   <span class="hljs-meta">@Injectable</span>({providedIn: <span class="hljs-string">'root'</span>})
   <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AuthGuardService {

   <span class="hljs-keyword">constructor</span>(<span class="hljs-params"></span>) { }
   }
   
</code></pre>
</li>
<li>
<p>Registrar o servi√ßo <strong>AuthGuardService</strong> em <strong>@NgModule( providers: [AuthService,AuthGuardService])</strong> no arquivo <strong>src/app/app.module.ts</strong>:</p>
<pre><code class="hljs language-ts">  <span class="hljs-comment">//file: **src/app/app.module.ts**</span>
  
  <span class="hljs-comment">/**
  * Importa a classe AuthGuardService 
  */</span>
  <span class="hljs-keyword">import</span> { AuthGuardService } <span class="hljs-keyword">from</span> <span class="hljs-string">'./guards/auth-guard.service'</span>;

  <span class="hljs-meta">@NgModule</span>({
  
  providers: [AuthService, AuthGuardService], <span class="hljs-comment">//Torna p√∫blico o servi√ßo de guarda de rotas</span>
  
  })
  

</code></pre>
</li>
<li>
<p>Refer√™ncias:</p>
<ol>
<li><a href="https://angular.io/guide/router">Importe <strong>RouterModule</strong> e <strong>Routes</strong> em seu m√≥dulo de roteamento.</a></li>
<li><a href="https://angular.io/api/router/Routes#routes">Matriz de objetos <strong>Routes</strong></a>.</li>
</ol>
</li>
</ol>
</li>
<li>
<p>No servi√ßo <strong>AuthGuardService</strong> implementar os m√©todos da interface <strong>CanActivate()</strong> e em <strong>AuthGuardService.constructor()</strong> injetar o servi√ßo <strong>AuthService</strong> e a classe <strong>Router</strong>;</p>
<pre><code class="hljs language-ts"> <span class="hljs-comment">//file : src/app/guards/auth-guard.service.ts</span>
                
<span class="hljs-comment">/**
 * Importa a classe CanActivate do pacote @angular/router
 */</span>
 <span class="hljs-keyword">import</span> {CanActivate} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;

<span class="hljs-comment">/**
 * Importa a classe ActivatedRouteSnapshot do pacote @angular/router
 * Cont√©m as informa√ß√µes sobre uma rota associada a um componente
 * carregado em uma tomada em um determinado momento. 
 * ActivatedRouteSnapshot tamb√©m pode ser usado para percorrer a √°rvore de 
 * estado do roteador.
 */</span>
 <span class="hljs-keyword">import</span> {ActivatedRouteSnapshot} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;

<span class="hljs-comment">/**
 * Importa a classe RouterStateSnapshot do pacote '@angular/router'
 * RouteStateSnapshot √© uma estrutura de dados imut√°vel que representa 
 * o estado do roteador em um determinado momento. Sempre que um componente 
 * √© adicionado ou removido ou um par√¢metro √© atualizado, um novo 
 * instant√¢neo √© criado.
 */</span>
 <span class="hljs-keyword">import</span> {RouterStateSnapshot} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;

<span class="hljs-comment">/**
 * Importa as classes ActivatedRoute do pacote '@angular/router'
 * Fornece acesso a informa√ß√µes sobre uma rota associada a um componente 
 * carregado em uma tomada. Use para percorrer a RouterState √°rvore e extrair 
 * informa√ß√µes dos n√≥s.
 */</span>
 <span class="hljs-keyword">import</span> {ActivatedRoute} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;

<span class="hljs-comment">/**
 * Importa as classes Router do pacote '@angular/router'
 * Router √© um objeto de configura√ß√£o que define uma √∫nica rota. 
 * Um conjunto de rotas √© coletado em uma Routes matriz para definir uma 
 * Router configura√ß√£o. 
 * O roteador tenta combinar segmentos de um determinado URL em cada rota, 
 * usando as op√ß√µes de configura√ß√£o definidas neste objeto.
 */</span>
 <span class="hljs-keyword">import</span> {Router} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;

 <span class="hljs-comment">/**
 * Importa a classe Observable do pacote 'rxjs'
 */</span>
 <span class="hljs-keyword">import</span> { Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;         

 <span class="hljs-comment">/**
 * Importa classe AuthService
 */</span>
 <span class="hljs-keyword">import</span> { AuthService } <span class="hljs-keyword">from</span> <span class="hljs-string">'../pages/login/auth.service'</span>;

 <span class="hljs-meta">@Injectable</span>({ providedIn: <span class="hljs-string">'root'</span>})

 <span class="hljs-comment">/**
 * Implementa a interface  CanActivate em AuthGuardService
 */</span>
 <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AuthGuardService <span class="hljs-keyword">implements</span> CanActivate {

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-comment">//Injetar o servi√ßo AuthService</span>
                <span class="hljs-keyword">private</span> authService:AuthService,
                <span class="hljs-comment">//Injetar o a classe Router</span>
                <span class="hljs-keyword">private</span> router:Router</span>) { }

    <span class="hljs-comment">//M√©todo da interface CanActivate            </span>
    canActivate( route: ActivatedRouteSnapshot, state: RouterStateSnapshot ):Observable&lt;<span class="hljs-built_in">boolean</span>&gt;|<span class="hljs-built_in">boolean</span> {
       <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.authService.autenticado == <span class="hljs-literal">true</span>) {
          <span class="hljs-comment">//usu√°rio autenticado</span>
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
       };

       <span class="hljs-comment">// Se usu√°rio n√£o est√° conectado ent√£o executa a p√°gina de login</span>
       <span class="hljs-keyword">this</span>.router.navigate([<span class="hljs-string">'./login'</span>]);

       <span class="hljs-comment">// Usu√°rio n√£o autenticado</span>
       <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
 }  

</code></pre>
</li>
<li>
<p>Em <strong>const routes: Routes = []</strong> do arquivo <strong>src/app/app-routing.module.ts</strong> passar como par√¢metro em cada rota a classe <strong>AuthGuardService</strong>.</p>
<ol>
<li>
<p>C√≥digo typescript</p>
<pre><code class="hljs language-ts">  <span class="hljs-comment">// Arquivo src/app/app-routing.module.ts</span>
  
  <span class="hljs-keyword">import</span> { AuthGuardService } <span class="hljs-keyword">from</span> <span class="hljs-string">'./guards/auth-guard.service'</span>;

  <span class="hljs-comment">/**
  * Criar rotas para que seja reconhecida pelos templates.html
  */</span>
  <span class="hljs-keyword">const</span> routes: Routes = [
     {path:<span class="hljs-string">'login'</span>, component:LoginComponent},
     {path:<span class="hljs-string">'home'</span>, component:HomeComponent,
     <span class="hljs-comment">//A propriedade abaixo deve ser inserida em toda rota com acesso autenticado</span>
     canActivate:[AuthGuardService]},
  ];

  <span class="hljs-meta">@NgModule</span>({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
  })
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> AppRoutingModule { }

</code></pre>
</li>
</ol>
</li>
<li>
<p><strong>Refer√™ncias:</strong></p>
<ol>
<li><a href="https://angular.io/guide/router">Importe <strong>RouterModule</strong> e <strong>Routes</strong> em seu m√≥dulo de roteamento.</a></li>
<li><a href="https://angular.io/api/router/Routes#routes">Matriz de objetos <strong>Routes</strong></a></li>
<li><a href="https://angular.io/api/router/CanActivate">API &gt; @angular/router &gt; CanActivate</a></li>
<li>.</li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id=id_referencias></span><strong>REFER√äNCIAS GLOBAIS</strong></p>
<ol>
<li>
<p><a href="https://www.youtube.com/watch?v=bOoddUeklZY&amp;list=PLGxZ4Rq3BOBoSRcKWEdQACbUCNWLczg2G&amp;index=64">Curso Angular #63: Rotas: Tela de Login e como n√£o mostrar o Menu (NavBar)</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=vVWttMeiR6s&amp;list=PLGxZ4Rq3BOBoSRcKWEdQACbUCNWLczg2G&amp;index=66">Curso Angular #64: Usando Guarda de Rotas: CanActivate</a></p>
</li>
<li>
<p><a href="##">#</a></p>
</li>
<li>
<p><a href="##">#</a></p>
</li>
<li>
<p><a href="##">#</a></p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ol>
</li>
<li>
<p><span id="id_historico"><span><strong>HIST√ìRICO</strong></p>
<ol>
<li>
<p>30/06/2021 <!--TODO: HIST√ìRICO --></p>
<ul class="contains-task-list">
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Criar este documento baseado no <a href="http://modelo03.html">modelo03.md</a> ;</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever t√≥pico Objetivos;</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever t√≥pico Pre-requisitos</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever t√≥pico Benef√≠cios</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever t√≥pico Conte√∫do</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever t√≥pico Exemplos</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever t√≥pico Refer√™ncias</p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ul>
</li>
<li>
<p>01/07/2021 <!--TODO: HIST√ìRICO --></p>
<ul class="contains-task-list">
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever os passo 01 a 08</p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ul>
</li>
<li>
<p>02/06/2021 <!--FIXME: Falta fazer os item abaixo: --></p>
<ul class="contains-task-list">
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Passo 09 - Ocultar a barra de menu quando o usu√°rio n√£o tiver autenticado</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Passo 10 - Usando guada de rotas para bloquear p√°gina html do usu√°rio n√£o autenticado</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox" checked=""type="checkbox"> Escrever resumo do documento</p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ul>
</li>
<li>
<p>03/06/2021 <!--FIXME: Falta fazer os item abaixo: --></p>
<ul class="contains-task-list">
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox"type="checkbox"> Testar os passos 01 a 06 para saber se √© este documento pe util.</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox"type="checkbox"> Testar os passos 07 a 09 para saber se √© este documento pe util.</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox"type="checkbox"> Testar os passos 106 para saber se √© este documento pe util.</p>
</li>
<li class="task-list-item enabled">
<p><input class="task-list-item-checkbox"type="checkbox"> Atualizar o hist√≥rico deste documento.</p>
</li>
<li>
<p><text onclick="goBack()">[üîô]</text></p>
</li>
</ul>
</li>
<li>
<p>.</p>
</li>
</ol>
</li>
</ol>
<p><a href="#topo" title="Retorna ao topo">üîùüîù</a></p>
 <script>    function goBack() {    window.history.back()}</script>

        
        
    </body>
    </html>