<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Programa para criar projeto b&aacute;sico typescript vers&atilde;o&colon; 0&period;2&period;0</title>
  
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description"   content="" />
        <meta name="keywords" content="" />
           
        <link type="text/css" href="/css/topnav.css" rel="stylesheet"/>        
        <link type="text/css" href="/css/defaultthemeMarkdown.css"  rel="stylesheet"/>

        <script type="application/x-javascript" src="/js/generic.js"></script>
        <script type="application/x-javascript" src="/js/tgeneric.js"></script>

        <script>document.addEventListener("DOMContentLoaded", function() {includeHTML();}                );</script>
        <script>document.addEventListener("DOMContentLoaded", function() {FixHeader(window, "myHeader");});</script>
        <script>document.addEventListener("DOMContentLoaded", function() {toggleTree();}                 );</script>   


    </head>
    <body class="vscode-body vscode-dark">
        <div class="header" id="myHeader">
  <div class="navbar" w3-include-html="/menu.inc"> </div>
</div>
<div class="title"><script> document.write(document.title);</script></div>  
<main>
<!-- markdownlint-disable-next-line -->
<span id="topo"><span>
<!-- <h1 id="programa-para-criar-projeto-básico-typescript-versão-020">Programa para criar projeto básico typescript versão: 0.2.0</h1> -->
<pre><code class="hljs language-sh"><span class="hljs-meta">#!/bin/sh
</span>
<span class="hljs-built_in">echo</span> PROGRAMA: Cria project typescript Básico
<span class="hljs-built_in">echo</span> AUTOR: Paulo Pacheco
<span class="hljs-built_in">echo</span> DATA DA CRIAÇÃO: 01/06/2021
<span class="hljs-built_in">echo</span> DATA DA ULTIMA ATUALIZAÇÃO: 08/06/2021
<span class="hljs-built_in">echo</span> 0.2.0
<span class="hljs-built_in">echo</span> .

<span class="hljs-comment"># Passo 01 - Função para renomeá arquivo e apagar o arquivo anterior se existir</span>
<span class="hljs-function"><span class="hljs-title">rename</span></span>(){
  <span class="hljs-comment">#Parâmetros</span>
  <span class="hljs-comment"># Chamada: rename param1 param2</span>
  fileName=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>;
  fileNameOld=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>;     

<span class="hljs-comment"># begin</span>
    <span class="hljs-keyword">if</span> [ -f <span class="hljs-variable">$fileNameOld</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-comment"># Se $fileNameOld já existe então apaga</span>
<span class="hljs-comment">#        echo O arquivo $fileNameOld foi criado anteriormente!. </span>
<span class="hljs-comment">#        echo Tecle ENTER para apaga-lo.</span>
<span class="hljs-comment">#        read input</span>
        rm <span class="hljs-variable">$fileNameOld</span>
    <span class="hljs-keyword">fi</span>


    <span class="hljs-keyword">if</span> [ -f <span class="hljs-variable">$filename</span> ]; <span class="hljs-keyword">then</span> <span class="hljs-comment"># Se $filename existe renomeia para $fileNameOld</span>
<span class="hljs-comment">#        echo O arquivo $fileName foi criado anteriormente!. </span>
<span class="hljs-comment">#        echo Tecle ENTER para renomear para $fileNameOld.</span>
<span class="hljs-comment">#        read input</span>
        mv  <span class="hljs-variable">$fileName</span> <span class="hljs-variable">$fileNameOld</span>   
    <span class="hljs-keyword">fi</span>
<span class="hljs-comment"># end    </span>
}


<span class="hljs-comment"># Passo 02 - Retorna o nome do projeto ou aborta o script</span>
<span class="hljs-function"><span class="hljs-title">ifExistProject</span></span>(){ 

<span class="hljs-comment"># Se o parâmetro 01 não existe então fazer nome do project igual ./myproject  </span>
  <span class="hljs-keyword">if</span> [ -z <span class="hljs-variable">$project</span> ]; <span class="hljs-comment"># -z indica que a string $pasta existe e é vazia.</span>
  <span class="hljs-keyword">then</span>     
    <span class="hljs-comment"># echo  -z $pasta retorno true</span>
    <span class="hljs-comment"># read input</span>
    project=<span class="hljs-string">"./myproject"</span>
  <span class="hljs-keyword">else</span>  
    <span class="hljs-comment"># echo  -z $pasta retorno false  </span>
    <span class="hljs-comment"># read input</span>
    project=<span class="hljs-string">"./<span class="hljs-variable">$project</span>"</span>
  <span class="hljs-keyword">fi</span>   

  <span class="hljs-keyword">if</span> [ -d <span class="hljs-variable">$project</span> ]; <span class="hljs-keyword">then</span> <span class="hljs-comment"># Se $pasta já existe então aborta execução.</span>
      <span class="hljs-comment">#echo O project $project foi criado anteriormente!. Tecle ENTER para sair.</span>
      <span class="hljs-comment">#read input</span>
      <span class="hljs-built_in">exit</span> EEXIST <span class="hljs-comment">#  aborta o script  </span>
      
  <span class="hljs-keyword">fi</span>

}

<span class="hljs-comment"># Passo 03 - Criar as pasta do projeto;</span>
<span class="hljs-function"><span class="hljs-title">createProject</span></span>(){

  ifExistProject <span class="hljs-comment"># Se o projeto já existe essa função aborta</span>
  
  <span class="hljs-comment"># Cria a pasta do project passada no parâmetro 01</span>
  mkdir <span class="hljs-variable">$project</span>

  <span class="hljs-comment"># Cria as pasta para os códigos fontes do project</span>
  mkdir ./<span class="hljs-string">"<span class="hljs-variable">$project</span>"</span>/src      <span class="hljs-comment"># Pasta raiz do código fonte </span>
  mkdir ./<span class="hljs-string">"<span class="hljs-variable">$project</span>"</span>/src/html <span class="hljs-comment"># Pasta html de entrada de webpack</span>
  mkdir ./<span class="hljs-string">"<span class="hljs-variable">$project</span>"</span>/src/css  <span class="hljs-comment"># Pasta css de entrada de webpack</span>
  mkdir ./<span class="hljs-string">"<span class="hljs-variable">$project</span>"</span>/src/js   <span class="hljs-comment"># Pasta de saide js de tsc </span>
  mkdir ./<span class="hljs-string">"<span class="hljs-variable">$project</span>"</span>/src/ts   <span class="hljs-comment"># Pasta de entrada ts de tsc</span>
  mkdir ./<span class="hljs-string">"<span class="hljs-variable">$project</span>"</span>/dist     <span class="hljs-comment"># Pasta destino do webpack para ser publicada na web.</span>

}


<span class="hljs-comment"># Passo 04 - Criar workspace para o projeto do vscode na pasta raiz do projeto;</span>
<span class="hljs-function"><span class="hljs-title">createWorkspace</span></span>(){

cat &gt;<span class="hljs-string">"./"</span><span class="hljs-variable">$project</span><span class="hljs-string">"/workspace.code-workspace"</span>&lt;&lt;EOT
{
    <span class="hljs-string">"folders"</span>: [
        {
            <span class="hljs-string">"path"</span>: <span class="hljs-string">"."</span>
        }   
    ]
}
EOT

}

<span class="hljs-comment"># Passo 05 - Adicionar o código .html no arquivo ./src/html/index.html;</span>
<span class="hljs-function"><span class="hljs-title">createFileIndexHtml</span></span>(){
  
<span class="hljs-comment"># Criar arquivo inicial index.html</span>
cat &gt;<span class="hljs-string">"./"</span><span class="hljs-variable">$project</span><span class="hljs-string">"/src/html/index.html"</span>&lt;&lt;EOT

  &lt;!DOCTYPE html&gt;
      &lt;html dir=<span class="hljs-string">"ltr"</span> lang=<span class="hljs-string">"pt-br"</span>&gt;

          &lt;head&gt;
              &lt;meta http-equiv=<span class="hljs-string">"content-type"</span> content=<span class="hljs-string">"text/html; charset=utf-8"</span> /&gt;

              &lt;meta name=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;

              &lt;title&gt;Modelo de project typescript&lt;/title&gt;

              &lt;meta name=<span class="hljs-string">"createDate"</span> content=<span class="hljs-string">"28/05/2021"</span> /&gt;
              &lt;meta name=<span class="hljs-string">"createDateUpdate"</span> content=<span class="hljs-string">"25/05/2021"</span> /&gt;
              &lt;meta name=<span class="hljs-string">"description"</span> content=<span class="hljs-string">"Todos project typescript deve seguir essa sequência ao iniciar..."</span> /&gt;
              &lt;meta name=<span class="hljs-string">"keywords"</span> content=<span class="hljs-string">"typescript,webpack"</span> /&gt;

              &lt;link <span class="hljs-built_in">type</span>=<span class="hljs-string">"text/css"</span> href=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"</span>
                  rel=<span class="hljs-string">"stylesheet"</span> /&gt;

          &lt;/head&gt;

          &lt;bodY&gt;
              &lt;p&gt;Alo mundo&lt;/p&gt;
           &lt;/body&gt;

      &lt;/html&gt;

EOT
  
}


<span class="hljs-comment"># Passo 06 - Adicionar o código .css no arquivo ./src/css/defaulttheme.css;</span>
<span class="hljs-function"><span class="hljs-title">createFiledefaultThemeCss</span></span>() {

cat &gt;<span class="hljs-string">"./"</span><span class="hljs-variable">$project</span><span class="hljs-string">"/src/css/defaulttheme.css"</span>&lt;&lt;EOT
    html {
        scroll-behavior: smooth;
        /* scroll lento*/
    }

    body {
        margin: 0;
        font-family: Arial
    }

EOT
}

<span class="hljs-comment"># Passo 07 - Adicionar o código .ts no arquivo ./src/ts/index.ts;</span>
<span class="hljs-function"><span class="hljs-title">createIndexTs</span></span>(){

cat &gt;<span class="hljs-string">"./"</span><span class="hljs-variable">$project</span><span class="hljs-string">"/src/ts/index.ts"</span>&lt;&lt;EOT
   console.log(<span class="hljs-string">'Alo mundo'</span>); 
EOT

}

<span class="hljs-comment"># Passo 08 - Executar o programa tsc-init para iniciar tudo que for preciso para o projeto;</span>
<span class="hljs-function"><span class="hljs-title">execTscInit</span></span>(){
  <span class="hljs-built_in">cd</span> <span class="hljs-variable">$project</span>
  tsc-init 
}

<span class="hljs-comment"># Passo 09 - Instalar pacotes.</span>
<span class="hljs-function"><span class="hljs-title">installPackages</span></span>(){

  <span class="hljs-comment"># Instala plugin a ser usado por alterWebpackConfig()</span>
  npm install --save-dev html-webpack-plugin
  npm install --save-dev html-loader 

}


<span class="hljs-comment"># Passo10 - Customizar o comportamento do webpack no arquivo webpack-config.js;</span>
<span class="hljs-function"><span class="hljs-title">alterWebpackConfig</span></span>(){

  <span class="hljs-built_in">echo</span> <span class="hljs-string">"... "</span>;
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Adiciona const path = require('path') em webpack.config.js;"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Adiciona a declaração \"const HtmlWebpackPlugin = require('html-webpack-plugin')\" em webpack.config.js"</span>


  subStrOrigem=<span class="hljs-string">'module.exports = {'</span>
  subStrDestino=<span class="hljs-string">" const path = require('path');\n const HtmlWebpackPlugin = require('html-webpack-plugin'); \n\n module.exports = {"</span>
                
  fileNameOld=<span class="hljs-string">"./webpack.config.js.ant"</span>
  fileName=<span class="hljs-string">"./webpack.config.js"</span>

  rename <span class="hljs-string">"<span class="hljs-variable">$fileName</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$fileNameOld</span>"</span>

  sed <span class="hljs-string">"s/<span class="hljs-variable">$subStrOrigem</span>/<span class="hljs-variable">$subStrDestino</span>/g"</span> <span class="hljs-variable">$fileNameOld</span> &gt; <span class="hljs-variable">$fileName</span> 
      
  <span class="hljs-built_in">echo</span> ...
  
  <span class="hljs-built_in">echo</span> Adiciona a propriedade <span class="hljs-string">"HtmlWebpackPlugin"</span> em module.exports = { webpack.config.js

  subStrOrigem=<span class="hljs-string">'module.exports = {'</span>
  subStrDestino=<span class="hljs-string">"module.exports = \{plugins:\[new HtmlWebpackPlugin\(\{filename:'index.html',template:'.\/src\/html\/index.html',inject:'body'\}\)\],"</span>
                
  fileNameOld=<span class="hljs-string">"./webpack.config.js.ant"</span>
  fileName=<span class="hljs-string">"./webpack.config.js"</span>

  rename <span class="hljs-string">"<span class="hljs-variable">$fileName</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$fileNameOld</span>"</span>

  sed <span class="hljs-string">"s/<span class="hljs-variable">$subStrOrigem</span>/<span class="hljs-variable">$subStrDestino</span>/g"</span> <span class="hljs-variable">$fileNameOld</span> &gt; <span class="hljs-variable">$fileName</span> 

  <span class="hljs-built_in">echo</span> ...

  <span class="hljs-built_in">echo</span> ...
  <span class="hljs-built_in">echo</span> Alterar o arquivo webpack.config.js  

  <span class="hljs-comment"># Atualiza o arquivo de entrada de webpack.config.js</span>
  subStrOrigem=<span class="hljs-string">"entry: '.\/index.ts'"</span>
  subStrDestino=<span class="hljs-string">"entry: '.\/src\/ts\/index.ts'"</span>
  fileNameOld=<span class="hljs-string">"./webpack.config.js.ant"</span>
  fileName=<span class="hljs-string">"./webpack.config.js"</span>
  rename <span class="hljs-string">"<span class="hljs-variable">$fileName</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$fileNameOld</span>"</span>
  sed <span class="hljs-string">"s/<span class="hljs-variable">$subStrOrigem</span>/<span class="hljs-variable">$subStrDestino</span>/g"</span> <span class="hljs-variable">$fileNameOld</span> &gt; <span class="hljs-variable">$fileName</span>   
}

<span class="hljs-comment"># Passo11 - Customizar arquivo package.json;</span>
<span class="hljs-function"><span class="hljs-title">alterPackage</span></span>(){
  <span class="hljs-built_in">echo</span> ...
  
  <span class="hljs-built_in">echo</span> Atualiza script <span class="hljs-string">"dev"</span> <span class="hljs-keyword">do</span> package.json
  subStrOrigem=<span class="hljs-string">"webpack-dev-server --inline --hot"</span>
  subStrDestino=<span class="hljs-string">"webpack serve --mode development --env development --hot --port 3000"</span>
  fileNameOld=<span class="hljs-string">"./package.json.ant"</span>
  fileName=<span class="hljs-string">"./package.json"</span>
  rename <span class="hljs-string">"<span class="hljs-variable">$fileName</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$fileNameOld</span>"</span>
  sed <span class="hljs-string">"s/<span class="hljs-variable">$subStrOrigem</span>/<span class="hljs-variable">$subStrDestino</span>/g"</span> <span class="hljs-variable">$fileNameOld</span> &gt; <span class="hljs-variable">$fileName</span> 

  <span class="hljs-built_in">echo</span> ...
  <span class="hljs-built_in">echo</span>  Atualiza script <span class="hljs-string">"build"</span> <span class="hljs-keyword">do</span> package.json
  subStrOrigem=<span class="hljs-string">"webpack -p"</span>
  subStrDestino=<span class="hljs-string">"webpack --mode='production'"</span>
  fileNameOld=<span class="hljs-string">"./package.json.ant"</span>
  fileName=<span class="hljs-string">"./package.json"</span>
  rename <span class="hljs-string">"<span class="hljs-variable">$fileName</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$fileNameOld</span>"</span>
  sed <span class="hljs-string">"s/<span class="hljs-variable">$subStrOrigem</span>/<span class="hljs-variable">$subStrDestino</span>/g"</span> <span class="hljs-variable">$fileNameOld</span> &gt; <span class="hljs-variable">$fileName</span> 

}

<span class="hljs-comment"># Passo 12 - Customizar arquivo tsconfig.json;</span>
<span class="hljs-function"><span class="hljs-title">alterTsconfig</span></span>(){
    <span class="hljs-built_in">echo</span> ...
    
    <span class="hljs-built_in">echo</span> Adiciona a propriedade <span class="hljs-string">"outDir"</span> em <span class="hljs-string">"compilerOptions"</span>: {} <span class="hljs-keyword">do</span> tsconfig.json

    subStrOrigem=<span class="hljs-string">'"compilerOptions": {'</span>
    subStrDestino=<span class="hljs-string">'"compilerOptions": {"outDir": ".\/src\/js",'</span>                
                  
    fileNameOld=<span class="hljs-string">"./tsconfig.json.ant"</span>
    fileName=<span class="hljs-string">"./tsconfig.json"</span>

    rename <span class="hljs-string">"<span class="hljs-variable">$fileName</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$fileNameOld</span>"</span>

    sed <span class="hljs-string">"s/<span class="hljs-variable">$subStrOrigem</span>/<span class="hljs-variable">$subStrDestino</span>/g"</span> <span class="hljs-variable">$fileNameOld</span> &gt; <span class="hljs-variable">$fileName</span> 

    <span class="hljs-built_in">echo</span> ...
    
}


<span class="hljs-comment"># PROGRAMA PRINCIPAL</span>
  <span class="hljs-comment"># $1 é passado na execução de my-tsc-init.sh</span>

project=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>
createProject
createWorkspace
createFileIndexHtml
createFiledefaultThemeCss
createIndexTs
execTscInit
installPackages
alterWebpackConfig
alterPackage
alterTsconfig

<span class="hljs-built_in">echo</span> fim <span class="hljs-keyword">do</span> script


</code></pre>
</main>
<p><a href="#topo" title="Retorna ao topo">🔝🔝</a></p>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>