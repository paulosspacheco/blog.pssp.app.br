<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Cadastro de Clientes em python</title>
  
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description"   content="" />
        <meta name="keywords" content="" />
           
        <link type="text/css" href="/css/topnav.css" rel="stylesheet"/>        
        <link type="text/css" href="/css/defaultthemeMarkdown.css"  rel="stylesheet"/>

        <script type="application/x-javascript" src="/js/generic.js"></script>
        <script type="application/x-javascript" src="/js/tgeneric.js"></script>

        <script>document.addEventListener("DOMContentLoaded", function() {includeHTML();}                );</script>
        <script>document.addEventListener("DOMContentLoaded", function() {FixHeader(window, "myHeader");});</script>
        <script>document.addEventListener("DOMContentLoaded", function() {toggleTree();}                 );</script>   


    </head>
    <body class="vscode-body vscode-dark">
        <div class="header" id="myHeader">
  <div class="navbar" w3-include-html="/menu.inc"> </div>
</div>
<div class="title"><script> document.write(document.title);</script></div>  
<main>
<!-- markdownlint-disable-next-line -->
<span id="topo"><span>
<!-- <h1 id="cadastro-de-clientes-em-python">Cadastro de Clientes em python</h1> -->
<ol>
<li>
<p>Instala√ß√£o de pacotes:</p>
<pre><code class="hljs language-bash">
    mkdir NodeSequelize
    <span class="hljs-built_in">cd</span> NodeSequelize

</code></pre>
</li>
<li>
<p>Programa para incluir, alterar, consultar e excluir cliente:</p>
<pre><code class="hljs language-python">
<span class="hljs-keyword">import</span> psycopg2
<span class="hljs-keyword">from</span> psycopg2 <span class="hljs-keyword">import</span> sql

<span class="hljs-comment"># Fun√ß√£o para conectar ao banco de dados</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">conectar</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">return</span> psycopg2.connect(
        dbname=<span class="hljs-string">"seu_banco_de_dados"</span>,
        user=<span class="hljs-string">"seu_usuario"</span>,
        password=<span class="hljs-string">"sua_senha"</span>,
        host=<span class="hljs-string">"localhost"</span>
    )

<span class="hljs-comment"># Fun√ß√£o para criar a tabela Medicos</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">criar_tabela_medicos</span><span class="hljs-params">(conexao)</span>:</span>
    <span class="hljs-keyword">with</span> conexao.cursor() <span class="hljs-keyword">as</span> cursor:
        cursor.execute(<span class="hljs-string">"""
            CREATE TABLE IF NOT EXISTS Medicos (
                Id SERIAL PRIMARY KEY,
                Nome VARCHAR(255) NOT NULL,
                Telefone VARCHAR(15),
                Telefone_da_secretaria VARCHAR(15),
                Login VARCHAR(50) UNIQUE NOT NULL,
                Senha VARCHAR(50) NOT NULL
            );
        """</span>)
    conexao.commit()

<span class="hljs-comment"># Fun√ß√£o para inserir um novo m√©dico</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inserir_medico</span><span class="hljs-params">(conexao, nome, telefone, telefone_secretaria, login, senha)</span>:</span>
    <span class="hljs-keyword">with</span> conexao.cursor() <span class="hljs-keyword">as</span> cursor:
        cursor.execute(<span class="hljs-string">"""
            INSERT INTO Medicos (Nome, Telefone, Telefone_da_secretaria, Login, Senha)
            VALUES (%s, %s, %s, %s, %s) RETURNING Id;
        """</span>, (nome, telefone, telefone_secretaria, login, senha))
        medico_id = cursor.fetchone()[<span class="hljs-number">0</span>]
    conexao.commit()
    <span class="hljs-keyword">return</span> medico_id

<span class="hljs-comment"># Fun√ß√£o para buscar todos os m√©dicos</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buscar_medicos</span><span class="hljs-params">(conexao)</span>:</span>
    <span class="hljs-keyword">with</span> conexao.cursor() <span class="hljs-keyword">as</span> cursor:
        cursor.execute(<span class="hljs-string">"SELECT * FROM Medicos;"</span>)
        medicos = cursor.fetchall()
    <span class="hljs-keyword">return</span> medicos

<span class="hljs-comment"># Fun√ß√£o para buscar um m√©dico por ID</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buscar_medico_por_id</span><span class="hljs-params">(conexao, medico_id)</span>:</span>
    <span class="hljs-keyword">with</span> conexao.cursor() <span class="hljs-keyword">as</span> cursor:
        cursor.execute(<span class="hljs-string">"SELECT * FROM Medicos WHERE Id = %s;"</span>, (medico_id,))
        medico = cursor.fetchone()
    <span class="hljs-keyword">return</span> medico

<span class="hljs-comment"># Fun√ß√£o para atualizar os dados de um m√©dico</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">atualizar_medico</span><span class="hljs-params">(conexao, medico_id, nome, telefone, telefone_secretaria, login, senha)</span>:</span>
    <span class="hljs-keyword">with</span> conexao.cursor() <span class="hljs-keyword">as</span> cursor:
        cursor.execute(<span class="hljs-string">"""
            UPDATE Medicos
            SET Nome = %s, Telefone = %s, Telefone_da_secretaria = %s, Login = %s, Senha = %s
            WHERE Id = %s;
        """</span>, (nome, telefone, telefone_secretaria, login, senha, medico_id))
    conexao.commit()

<span class="hljs-comment"># Fun√ß√£o para excluir um m√©dico por ID</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">excluir_medico</span><span class="hljs-params">(conexao, medico_id)</span>:</span>
    <span class="hljs-keyword">with</span> conexao.cursor() <span class="hljs-keyword">as</span> cursor:
        cursor.execute(<span class="hljs-string">"DELETE FROM Medicos WHERE Id = %s;"</span>, (medico_id,))
    conexao.commit()

<span class="hljs-comment"># Exemplo de uso</span>
conexao = conectar()
criar_tabela_medicos(conexao)

<span class="hljs-comment"># Inserir um novo m√©dico</span>
medico_id = inserir_medico(conexao, <span class="hljs-string">"Dr. Smith"</span>, <span class="hljs-string">"123456789"</span>, <span class="hljs-string">"987654321"</span>, <span class="hljs-string">"dr_smith"</span>, <span class="hljs-string">"senha123"</span>)

<span class="hljs-comment"># Buscar todos os m√©dicos</span>
todos_medicos = buscar_medicos(conexao)
print(<span class="hljs-string">"Todos os m√©dicos:"</span>, todos_medicos)

<span class="hljs-comment"># Buscar um m√©dico por ID</span>
medico_encontrado = buscar_medico_por_id(conexao, medico_id)
print(<span class="hljs-string">"M√©dico encontrado:"</span>, medico_encontrado)

<span class="hljs-comment"># Atualizar os dados do m√©dico</span>
atualizar_medico(conexao, medico_id, <span class="hljs-string">"Dr. Smith Atualizado"</span>, <span class="hljs-string">"111111111"</span>, <span class="hljs-string">"222222222"</span>, <span class="hljs-string">"dr_smith"</span>, <span class="hljs-string">"nova_senha"</span>)

<span class="hljs-comment"># Buscar novamente o m√©dico por ID</span>
medico_atualizado = buscar_medico_por_id(conexao, medico_id)
print(<span class="hljs-string">"M√©dico atualizado:"</span>, medico_atualizado)

<span class="hljs-comment"># Excluir o m√©dico</span>
excluir_medico(conexao, medico_id)

<span class="hljs-comment"># Buscar todos os m√©dicos ap√≥s exclus√£o</span>
todos_medicos_apos_exclusao = buscar_medicos(conexao)
print(<span class="hljs-string">"Todos os m√©dicos ap√≥s exclus√£o:"</span>, todos_medicos_apos_exclusao)

<span class="hljs-comment"># Fechar a conex√£o</span>
conexao.close()


</code></pre>
</li>
</ol>
<!-- markdownlint-disable-next-line -->
</main>
<p><a href="#topo" title="Retorna ao topo">üîùüîù</a></p>

        
        
    </body>
    </html>