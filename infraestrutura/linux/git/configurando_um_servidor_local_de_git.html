<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Configurando um servidor local de Git no Debian ou seus derivados &lt;a href&equals;&quot;configurando&lowbar;um&lowbar;servidor&lowbar;local&lowbar;de&lowbar;git&period;html&quot; target&equals;&quot;&lowbar;blank&quot; title&equals;&quot;Pressione aqui para expandir este documento em nova aba&period;&quot; &gt;  &#x279a; &lt;&sol;a&gt;</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- CSS markdown -->
        <link type="text/css" href="/css/defaultthemeMarkdown.css"  rel="stylesheet"  />
        
        <!-- CSS da página /index.html -->
        <link type="text/css" href="/css/defaulttheme.css" rel="stylesheet"/>        


    </head>
    <body class="vscode-body vscode-light">
        <h4 id="configurando-um-servidor-local-de-git-no-debian-ou-seus-derivados----">Configurando um servidor local de Git no Debian ou seus derivados <a href="configurando_um_servidor_local_de_git.html" target="_blank" title="Pressione aqui para expandir este documento em nova aba." >  ➚ </a></h4>
<h3 id="como-funciona"><strong>Como funciona</strong></h3>
<p>Antes de instalarmos e configurarmos o Git, precisamos entender onde aplica-se seu uso.</p>
<p>Basicamente, na maioria dos casos, o Git roda em um servidor que pode ser na rede local ou na Web. Nesse server mantemos um repositório central, o que vamos chamar de Git Server.
Localmente, na sua estação de trabalho, por exemplo, é mantido um repositório local, ou seja, um clone do repo central. Nos arquivos dentro desse repo local você realiza suas modificações e, ao concluí-las, as envia para o git server. Aquilo que modificou e seus comentários sobre suas mudanças são armazenados para consulta posterior.</p>
<p>Caso outras pessoas possuam um clone desse repo, bastará rodar o comando <code>git pull</code> para obter as mudanças que você realizou e que já estarão armazenadas no git server.</p>
<p>Inclusive, recomendo rodar <code>git pull</code> antes de enviar modificações para o git server.</p>
<p>Na imagem abaixo podemos ver um exemplo de um time que pode ser de desenvolvimento. Todos trabalham com um repositório local e enviam e recebem mudanças de um repositório central: <img src="file:////home/paulosspacheco/blog.pssp.app.br/infraestrutura/linux/git/images/image01.jpg" alt="Imagem de vários repositórios e o servidor" title="Esta imagem mostra de forma visual como funciona as cópias dos arquivos."></p>
<p><strong>Configurações feitas no servidor:</strong></p>
<ol>
<li>
<p>Agora é preciso criar o usuário que utilizaremos para acessar o repositório do Git.</p>
<pre><code class="hljs language-sh">
   sudo useradd git -s -d /home/git

</code></pre>
</li>
<li>
<p>Agora criaremos o diretório home do usuário ‘git’ (/home/git) e nele o path onde armazenaremos o repositório do nosso primeiro repo que se chamará ‘lab’:</p>
<pre><code class="hljs language-sh">
   sudo mkdir -p /home/git/repos/lab.git

</code></pre>
</li>
<li>
<p>Agora ajustaremos o owner:group dos diretórios que criamos:</p>
<pre><code class="hljs language-sh">
   sudo chown -R git:git /home/git

</code></pre>
</li>
<li>
<p>Vamos usar o usuário ‘git’ para configurar o repo. Assim não precisaremos ajustar owner:group novamente:</p>
<pre><code class="hljs language-sh">
    sudo git -l

</code></pre>
</li>
<li>
<p>Agora entre no path onde manteremos a estrutura do repo:</p>
<pre><code class="hljs language-sh">    <span class="hljs-built_in">cd</span> repos/lab.git
</code></pre>
</li>
<li>
<p>Por fim, vamos iniciar um repo aqui. Para isso, utilizaremos o comando abaixo:</p>
<pre><code class="hljs language-sh">    sudo git --bare init
</code></pre>
</li>
<li>
<p>Fecha a conexão do usuário “git” e faça o login como usuário “root”.</p>
</li>
<li>
<p>Daqui para frente pouco utilizará o usuário “git”. Portanto, vamos aumentar a segurança do user trocando seu shell default.</p>
<ol>
<li>
<p>Altere o shell do usuário “git” para deixar seu repo mais seguro:</p>
<pre><code class="hljs language-sh">
   sudo usermod -s /usr/bin/git-shell

</code></pre>
</li>
<li>
<p>Com isso, ao tentarmos logar com o usuário “git”, receberá a mensagem abaixo:</p>
</li>
</ol>
<pre><code class="hljs language-sh">    sudo su git -l

    fatal: Interactive git shell is not enabled.
    hint: ~/git-shell-commands should exist and have <span class="hljs-built_in">read</span> and execute access.
</code></pre>
</li>
</ol>
<h2 id="referências">REFERÊNCIAS</h2>
<ol>
<li><a href="https://www.blogporta80.com.br/2015/09/24/artigos-configurando-um-servidor-de-git-no-debian/">Configurando-um-servidor-de-git-no-debian</a></li>
</ol>

        
        
    </body>
    </html>